JAVA version: java 17.0.1

# Программа управления сотрудниками

Эта программа предназначена для управления данными сотрудников, позволяя пользователям сортировать
и выводить информацию на основе заданных критериев.
Она поддерживает различные флаги командной строки для гибкого использования.

## Возможности

- Сортировка записей сотрудников по имени или зарплате;
- Вывод результатов в консоль или экспорт в файл;
- Гибкие параметры сортировки (по возрастанию/убыванию).


## Подготовка входных данных

Убедитесь, что файл `input_file.txt`, содержащий информацию о сотрудниках и менеджерах, существует.
Изначально было создано два файла для различных способов запуска программы.

Обратите внимание, что вам необходимо вносить изменения в файл `input_file.txt` в зависимости от метода запуска. \
В случае, если вы запускаете программу с помощью первого способа, пожалуйста, редактируйте
содержимое файла `input_file.txt`, расположенного в папке `src`. Если же вы используете второй способ запуска,
соответствующие изменения необходимо вносить в файле, находящемся в папке `dist`.

**Формат данных:**
|Название поля              |Тип данных     |
|---------------------------|---------------
| Должность                 | Строка        |
| Идентификатор             | Число         |
| имя                       | Строка        |
| департамент/id менеджера  | Строка/Число  |

Во входном файле информация должна храниться в следующем формате:

Должность,идентификатор,имя,зарплата,департамент/идентификатор менеджера

Пример:
```
Manager, 1, Jane Smith, 5000.0, HR
Employee, 101, John Doe, 3000.5, 1
```

Важно отметить, если в поле `должность` указано значение `Manager`, то в последнем поле ожидается название департамента.
Если же в поле `должность` указано значение `Employee`, то в значении последнего поля ожидается id менеджера
к которому он относится. В противном случае информация будет воспринята как некорректная.

Пример некорректных данных:
```
Manager, 123, Zoe Hill, 1000, HR
Employee, 101, John Doe, 3000.5, HR
```
При обработке данных нескольких менеджеров, принадлежащих к одному отделу, информация будет считаться корректной,
и указанные менеджеры будут относиться к одному и тому же отделу.
Пример:

```
Manager, 123, Zoe Hill, 10000, HR
Manager, 181, Chris White, 3000.5, HR
```


Полный пример данных, находящихся в input_file.txt:

```
Manager, 1, Jane Smith, 5000.0, HR
Employee, asd, Joseph Allen, 5000.0, HR
Manager, 123, Zoe Hill, 100000000, HR
Employee, 101, John Doe, 3000.5, 1
Employee, 102, Emily Johnson, abc, 1
Manager, 2, Michael Brown, 6000.8, Sales
Employee, 103, Chris White,-2900, 2
Employee, 104, Anna Taylor, 3100.1,2
Employee, 111, Owen Sanchez, 1000,2
Employee, 105, Robert Black, , 2
```

## Использование

Существует 2 способа запуска приложения.

Перед запуском необходимо перейти в директорию с нашим проектом.


**Способ №1(С помощью исходного кода)**

Перейдите в папку src:
```
cd src
```

Необходимо проверить, что в директории `src` находятся `Main.java` и `input_file.txt`\
Сделать это можно с помощью следующей команды:

На Windows:

```
dir
```

На macOS или Linux:

```
ls
```

Если в данной папке не находится файл `input_file.txt`, его необходимо переместить.\
После перемещения снова осуществите проверку на наличие данных файлов.

Теперь, если вы выполнили все шаги правильно, вы находитесь в папке с вашим проектом и можете продолжать работу.

**Запуск программы** 

Запустите программу, используя следующую команду (вы должны находиться в папке `src`):

```
javac Main.java; java Main [флаги]
```

**Способ №2 (используя JAR файл)**

Чтобы запустить программу, упакованную в JAR файл, нужно следовать нескольким простым шагам.
Убедитесь, что у вас установлен Java Runtime Environment (JRE) или Java Development Kit (JDK).
Если Java не установлена, вы можете скачать ее с официального сайта Oracle или
воспользоваться дистрибутивами, такими как OpenJDK.

Откройте терминал или командную строку используя команды описанные в первом способе.
Перейдите в каталог, где находится ваш JAR файл(директория `dist`).

Убедитесь что в папке с JAR файлом(директория `dist`) находится файл input_file.txt.
Если он отстутствует переместите его.

Теперь, если вы выполнили все шаги правильно, вы находитесь в папке с JAR файлом и `input_file.txt` 
и можете заупскать программу.

Используйте следующую команду для запуска JAR файла:
```
java -jar test-demo-shift.jar [флаги]
```

### Флаги командной строки

Вы можете указать различные параметры при запуске программы:

`--output=<file|console>:` Определяет, куда выводить данные.\
`file`: Вывод в файл.\
`console`: Вывод в консоль.

В случае когда флаг `--output` не установлен, вывод осуществляется в `console`.
Т.е. значение `console` для данного флага является значением по умолчанию.


`--path=<file path>`: Указывает путь к файлу вывода (требуется только при установке `--output=file`).

`--sort=<name|salary>`: Указывает поле, по которому будет производиться сортировка сотрудников.\
`name`: Сортировать по имени.\
`salary`: Сортировать по зарплате.

`--order=<asc|desc>`: Указывает порядок сортировки (требуется при использовании `--sort`)\
`asc`: Порядок возрастания.\
`desc`: Порядок убывания.

`-s=<name|salary>`: Упрощенная версия флага `--sort`.

`-o=<file|console>`: Упрощенная версия флага `--output`.

**Примеры запуска программы**

Вывод в консоль без сортировки:
```
javac Main.java; java Main  --output=console
```

```
java -jar test-demo-shift.jar  --output=console
```

Вывод в файл с указанием пути:
```
javac Main.java; java Main  --output=file --path=employees.txt
```

```
java -jar test-demo-shift.jar  --output=file --path=employees.txt
```
Сортировка по имени в порядке возрастания и вывод в файл:
```
javac Main.java; java Main  --output=file --path=sorted_by_name.txt --sort=name --order=asc
```

```
java -jar test-demo-shift.jar  --output=file --path=sorted_by_name.txt --sort=name --order=asc
```
## Возможные ошибки
Следует обратить внимание, что в следующих случаях программа завершит свое выполнение с кодом 1:

- Если невозможно обратиться к файлу (например, файл не существует;
- Отсутствуют необходимые права доступа или файл занят другим процессом);
- Если указаны неверные флаги или значения при запуске программы.

В случаях, когда возникает ошибка доступа к файлу или файл не найден, программа выведет сообщение об ошибке,
информирующее пользователя о проблеме.
Аналогично, если вводимые флаги или параметры не соответствуют ожидаемым значениям,
программа также выдаст сообщение об ошибке с соответствующим описанием.


### Ошибки во входных данных

Программа проводит валидацию входных данных и сообщит о следующих ошибках:

Некорректный формат данных:
- Если строка в входном файле не содержит ожидаемого количества полей, считается неверной 
и заносится в список сообщений об ошибках.

- Отрицательная `salary`: Если указано значение зарплаты, меньшее нуля, запись будет помечена как некорректная.

- Дублирующийся `ID`: Если `ID` сотрудника уже существует в системе, запись будет помечена как некорректная.

- Не существующий менеджер: Если сотрудник ссылается на `ID` менеджера, который не был загружен, такая запись также будет
считаться некорректной;

- Пустые значения: Все поля, за исключением `имени` не могут принимать пустое значение.

Все некорректные записи выводятся с пометкой "`Incorrect data:`" в конце вывода, что позволяет быстро
идентифицировать и исправить ошибки в исходном файле.
В целях корректного поиска ошибки входных данных со стороны пользователя, программа выводит данные без
каких-либо изменений включая пробелы.

Пример вывода некорректных входных данных:
```
Incorrect data:
Manager, asd, Joseph Allen, 5000.0, HR
Employee, 102, Emily Johnson, abc, 1
Employee, 103, Chris White,-2900, 2
Employee, 105, Robert Black, , 2
Employee, 165,Michael Brown, 300.0, HR
```


## Вывод данных

Вывод данных осуществляется следующим образом:\
В начале всегда идёт имя департамента, потом менеджер, потом
сотрудники.
Все данные об сотрудниках разделены символом `,` для удобства чтения.
Пример вывода данных о сотруднике:
```
Employee,104,Anna Taylor,3100.10
```
### Статистика

Для каждой группы сотрудников, находящихся в одном отделе программа подсчитывает:

Общее количество сотрудников в отделе.\
Средняя зарплата сотрудников, округленная до двух знаков после запятой.\
Эти статистические данные выводятся после списка сотрудников и их менеджеров для каждого отдела.

Пример вывода данных отдела с подсчетом статистики:
```
Sales
Manager,2,Michael Brown,6000.80
Employee,104,Anna Taylor,3100.10
Employee,111,Owen Sanchez,1000.00
3, 3366.97
```

